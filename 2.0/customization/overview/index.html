




<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
        <meta name="description" content="An overview of the powerful customization features">
    
    <meta name="docsearch:version" content="2.0">
    
        <title>Customization Overview - CommonMark for PHP</title>
    
    <link rel="icon" type="image/x-icon" href="//theme.thephpleague.com/img/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" href="//theme.thephpleague.com/img/apple-touch-icon-precomposed.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@thephpleague" />
    <meta name="twitter:creator" content="@colinodell" />
    <meta property="og:url" content="https://commonmark.thephpleague.com/2.0/customization/overview/" />
    
        <meta property="og:title" content="Customization Overview - CommonMark for PHP" />
    
    
        <meta property="og:description" content="An overview of the powerful customization features" />
    
    <meta property="og:image" content="https://commonmark.thephpleague.com/images/commonmark-social.png" />
    <link rel="stylesheet" href="//theme.thephpleague.com/css/all.css?31f91fcbc2e49e8a1d9ed776d72d6de7457566f5">
    <link rel="stylesheet" href="/custom.css?31f91fcbc2e49e8a1d9ed776d72d6de7457566f5">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <link rel="stylesheet" href="/support.css?31f91fcbc2e49e8a1d9ed776d72d6de7457566f5">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ=" crossorigin="anonymous" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-137970568-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-137970568-1');
    </script>
</head>
<body>
<header>
    <div class="header-content">
        <h1 class="title">
            <a class="logo" href="/">
            <span class="name">
                <em>League\</em>CommonMark
            </span>
            </a>
        </h1>
        <div class="search"><input type="search" id="doc-search" placeholder="search the docs..."></div>
        <nav class="versions">
            <h2>v2.0 &#9662;</h2>
            <ul>
            
                <li class="selected"><a href="/2.0/">v2.0</a></li>
            
                <li ><a href="/1.4/">v1.4</a></li>
            
                <li ><a href="/1.3/">v1.3</a></li>
            
                <li ><a href="/1.0/">v1.0</a></li>
            
                <li ><a href="/0.19/">v0.19</a></li>
            
                <li ><a href="/releases/">Notes</a></li>
            </ul>
        </nav>
    </div>
</header>

<input type="checkbox" id="menu">
<label for="menu" onclick>
    <div class="closed">&#9776;</div>
    <div class="open">&#10799;</div>
</label>

<main>
    <menu>
        <div class="versions-small">
        <h2>Versions</h2>
            <ul>
        
                <li class="selected">
                    <a href="/2.0/">2.0</a>
                </li>
        
                <li >
                    <a href="/1.4/">1.4</a>
                </li>
        
                <li >
                    <a href="/1.3/">1.3</a>
                </li>
        
                <li >
                    <a href="/1.0/">1.0</a>
                </li>
        
                <li >
                    <a href="/0.19/">0.19</a>
                </li>
        
                <li ><a href="/releases/">Releases Notes</a></li>
            </ul>
        </div>

        
            
            <div class="menu-section">
                <h2>Getting Started</h2>
                <ul>
                    
                        <li >
                            <a href="/2.0/">Overview</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/installation/">Installation</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/upgrading/">Upgrading from 1.4</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/changelog/">Changelog</a>
                        </li>
                    
                </ul>
            </div>
            
            <div class="menu-section">
                <h2>Usage</h2>
                <ul>
                    
                        <li >
                            <a href="/2.0/basic-usage/">Basic Usage</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/configuration/">Configuration</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/security/">Security</a>
                        </li>
                    
                </ul>
            </div>
            
            <div class="menu-section">
                <h2>Extensions</h2>
                <ul>
                    
                        <li >
                            <a href="/2.0/extensions/overview/">Overview</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/commonmark/">CommonMark</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/github-flavored-markdown/">Github-Flavored Markdown</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/autolinks/">Autolinks</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/disallowed-raw-html/">Disallowed Raw HTML</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/external-links/">External Links</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/heading-permalinks/">Heading Permalinks</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/inlines-only/">Inlines Only</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/smart-punctuation/">Smart Punctuation</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/strikethrough/">Strikethrough</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/tables/">Tables</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/extensions/task-lists/">Task Lists</a>
                        </li>
                    
                </ul>
            </div>
            
            <div class="menu-section">
                <h2>Customization</h2>
                <ul>
                    
                        <li class="selected">
                            <a href="/2.0/customization/overview/">Overview</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/environment/">Environment</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/extensions/">Extensions</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/event-dispatcher/">Event Dispatcher</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/cursor/">Cursor</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/block-parsing/">Block Parsing</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/inline-parsing/">Inline Parsing</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/delimiter-processing/">Delimiter Processing</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/abstract-syntax-tree/">Abstract Syntax Tree</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/block-rendering/">Block Rendering</a>
                        </li>
                    
                        <li >
                            <a href="/2.0/customization/inline-rendering/">Inline Rendering</a>
                        </li>
                    
                </ul>
            </div>
            
        
    </menu>
    <article>
    
        <p class="message-notice">This is the documentation for the upcoming <code>version 2.0</code>. This is a work in progress</p>
    

    

    

        <h1 id="customization-overview">Customization Overview</h1>

<p>Ready to go beyond the basics of converting Markdown to HTML? This page describes some of the more advanced things you can customize this library to do.</p>

<h2 id="parsing-and-rendering">Parsing and Rendering</h2>

<p>The actual process of converting Markdown to HTML has several steps:</p>

<ol>
  <li>Create an <a href="/2.0/customization/environment/"><code class="highlighter-rouge">Environment</code></a>, adding whichever extensions/parser/renders you need</li>
  <li>Set custom configuration options within the <code class="highlighter-rouge">Environment</code></li>
  <li>Instantiate a <code class="highlighter-rouge">DocParser</code> and <code class="highlighter-rouge">HtmlRenderer</code> using that <code class="highlighter-rouge">Environment</code></li>
  <li>Use the <code class="highlighter-rouge">DocParser</code> to parse the Markdown input into an <a href="/2.0/customization/abstract-syntax-tree/">Abstract Syntax Tree</a> (aka an “AST”)</li>
  <li>Use the <code class="highlighter-rouge">HtmlRenderer</code> to convert the <a href="/2.0/customization/abstract-syntax-tree/#document">AST <code class="highlighter-rouge">Document</code></a> into HTML</li>
</ol>

<p><code class="highlighter-rouge">CommonMarkConverter</code> handles all of this for you, but you can execute that process yourself if you wish:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nn">League\CommonMark\Parser\DocParser</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">League\CommonMark\Environment\Environment</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">League\CommonMark\Renderer\HtmlRenderer</span><span class="p">;</span>

<span class="nv">$environment</span> <span class="o">=</span> <span class="nx">Environment</span><span class="o">::</span><span class="na">createCommonMarkEnvironment</span><span class="p">();</span>
<span class="nv">$environment</span><span class="o">-&gt;</span><span class="na">setConfig</span><span class="p">([</span>
    <span class="s1">'html_input'</span> <span class="o">=&gt;</span> <span class="s1">'strip'</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nv">$parser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DocParser</span><span class="p">(</span><span class="nv">$environment</span><span class="p">);</span>
<span class="nv">$htmlRenderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HtmlRenderer</span><span class="p">(</span><span class="nv">$environment</span><span class="p">);</span>

<span class="nv">$markdown</span> <span class="o">=</span> <span class="s1">'# Hello World!'</span><span class="p">;</span>

<span class="nv">$document</span> <span class="o">=</span> <span class="nv">$parser</span><span class="o">-&gt;</span><span class="na">parse</span><span class="p">(</span><span class="nv">$markdown</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$htmlRenderer</span><span class="o">-&gt;</span><span class="na">renderBlock</span><span class="p">(</span><span class="nv">$document</span><span class="p">);</span>

<span class="c1">// &lt;h1&gt;Hello World!&lt;/h1&gt;</span>
</code></pre></div></div>

<p>Feel free to swap out different components or add your own steps in between.  However, the best way to customize this library is to <a href="/2.0/customization/extensions/">create your own extensions</a> which hook into the parsing and rendering steps - continue reading to see which kinds of extension points are available to you.</p>

<h2 id="add-custom-syntax-with-parsers">Add Custom Syntax with Parsers</h2>

<p>Parsers examine the Markdown input and produce an abstract syntax tree (AST) of the document’s structure.
This resulting AST contains both blocks (structural elements like paragraphs, lists, headers, etc) and inlines (words, spaces, links, emphasis, etc).</p>

<p>There are two main types of parsers:</p>

<ul>
  <li><a href="/2.0/customization/block-parsing/">Block parsers</a></li>
  <li><a href="/2.0/customization/inline-parsing/">Inline parsers</a></li>
</ul>

<p>The parsing approach is identical for both types - examine text at the current position (via the <a href="/2.0/customization/cursor/"><code class="highlighter-rouge">Cursor</code></a>) and determine if you can handle it;
if so, create the corresponding AST element,
otherwise you abort and the engine will try other parsers.  If no parser succeeds then the current text is treated as plain text.</p>

<p>Simple delimiter-based inlines (like emphasis, strikethrough, etc.) can be parsed without needing a dedicated inline parser by leveraging the new <a href="/2.0/customization/delimiter-processing/">Delimiter Processing</a> functionality.</p>

<h2 id="ast-manipulation">AST manipulation</h2>

<p>Once the <a href="/2.0/customization/abstract-syntax-tree/">Abstract Syntax Tree</a> is parsed, you are free to access/manipulate it as needed before it’s passed into the rendering engine.</p>

<h2 id="customize-html-output-with-custom-renderers">Customize HTML Output with Custom Renderers</h2>

<p>Renders convert the parsed blocks/inlines from the AST representation into HTML.  There are two types of renderers:</p>

<ul>
  <li><a href="/2.0/customization/block-rendering/">Block renderers</a></li>
  <li><a href="/2.0/customization/inline-rendering/">Inline renderers</a></li>
</ul>

<p>When registering these with the environment, you must tell it which block/inline classes it should handle.  This allows you
to essentially “swap out” built-in renderers with your own.</p>

<h2 id="examples">Examples</h2>

<p>Some examples of what’s possible:</p>

<ul>
  <li><a href="/2.0/customization/inline-parsing#example-1---twitter-handles">Parse Twitter handles into profile links</a></li>
  <li><a href="/2.0/customization/inline-parsing#example-2---emoticons">Convert smilies into emoticon images</a></li>
</ul>

    </article>

    <aside class="support-banner-wrapper" x-data="{ show: false }" x-show.transition="show" x-init="h = localStorage.getItem('hideBanner'); (h === null || h < (new Date().getTime())) ? (setTimeout(() => show = true, 500)) : (show = false)" style="">
        <div class="support-banner">
            <p class="support-banner-left">
                <strong>Love PHP Commonmark?</strong>
                <span class="hidden sm:inline-block lg:hidden">
                    Show your support!
                </span>

                <span class="hidden lg:inline-block">
                    Support development via monthly sponsorship or a one-time donation!
                </span>
            </p>

            <div class="support-banner-right">
                <a href="https://www.colinodell.com/sponsor" class="support-button support-button-sponsor">
                    <i class="fas fa-heart fa-fw"></i> Sponsor
                </a>

                <a href="https://www.paypal.me/colinpodell/10.00" class="support-button support-button-donate">
                    <i class="fas fa-donate fa-fw"></i> Donate
                </a>
            </div>

            <button x-on:click="localStorage.setItem('hideBanner', new Date().getTime() + (7*24*60*60*1000)); show = false" class="support-banner-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </aside>
</main>

<footer>
    <span>&copy; Copyright <a href="https://www.colinodell.com">Colin O'Dell</a> &amp; <a href="//thephpleague.com">The League of Extraordinary Packages</a>.</span>
    <span>Site design by <a href="//reinink.ca">Jonathan Reinink</a> and <a href="//nyamsprod.com">Ignace Nyamagana Butera</a>.</span>
</footer>
<script src="/custom.js?31f91fcbc2e49e8a1d9ed776d72d6de7457566f5"></script>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
<script> docsearch({
    apiKey: '8f6d6eb939fe0df83616a0bb240332c8',
    indexName: 'commonmark-thephpleague',
    inputSelector: '#doc-search',
    algoliaOptions: { 'facetFilters': ["version:2.0"] },
    debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
